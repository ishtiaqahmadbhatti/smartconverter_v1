<div class="auth-page">
    <div class="auth-card">
        <div class="auth-header">
            <div class="icon-circle">
                <i class="fas fa-lock-reset"></i>
            </div>
            <h2>Change Password</h2>
            <p>Update your password to keep your account secure.</p>
        </div>

        <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">

            <!-- Old Password -->
            <div class="form-group">
                <label>Current Password</label>
                <div class="input-wrapper">
                    <i class="fas fa-lock input-icon"></i>
                    <input [type]="showOldPassword ? 'text' : 'password'" formControlName="oldPassword"
                        class="form-control" placeholder="Current Password">
                    <i class="fas" [class.fa-eye]="!showOldPassword" [class.fa-eye-slash]="showOldPassword"
                        (click)="toggleVisibility('old')"></i>
                </div>
                <div *ngIf="changePasswordForm.get('oldPassword')?.touched && changePasswordForm.get('oldPassword')?.errors?.['required']"
                    class="error-msg">
                    Current password is required
                </div>
            </div>

            <!-- New Password -->
            <div class="form-group">
                <label>New Password</label>
                <div class="input-wrapper">
                    <i class="fas fa-key input-icon"></i>
                    <input [type]="showNewPassword ? 'text' : 'password'" formControlName="newPassword"
                        class="form-control" placeholder="New Password (min 6 chars)">
                    <i class="fas" [class.fa-eye]="!showNewPassword" [class.fa-eye-slash]="showNewPassword"
                        (click)="toggleVisibility('new')"></i>
                </div>
                <div *ngIf="changePasswordForm.get('newPassword')?.touched && changePasswordForm.get('newPassword')?.errors"
                    class="error-msg">
                    <span *ngIf="changePasswordForm.get('newPassword')?.errors?.['required']">New password is
                        required</span>
                    <span *ngIf="changePasswordForm.get('newPassword')?.errors?.['minlength']">Must be at least 6
                        characters</span>
                </div>
            </div>

            <!-- Confirm Password -->
            <div class="form-group">
                <label>Confirm New Password</label>
                <div class="input-wrapper">
                    <i class="fas fa-check-circle input-icon"></i>
                    <input [type]="showConfirmPassword ? 'text' : 'password'" formControlName="confirmPassword"
                        class="form-control" placeholder="Confirm New Password">
                    <i class="fas" [class.fa-eye]="!showConfirmPassword" [class.fa-eye-slash]="showConfirmPassword"
                        (click)="toggleVisibility('confirm')"></i>
                </div>
                <div *ngIf="changePasswordForm.get('confirmPassword')?.touched" class="error-msg">
                    <span *ngIf="changePasswordForm.get('confirmPassword')?.errors?.['required']">Please confirm your
                        password</span>
                    <span *ngIf="changePasswordForm.errors?.['mismatch']">Passwords do not match</span>
                </div>
            </div>

            <button type="submit" class="btn-submit" [disabled]="isSubmitting">
                {{ isSubmitting ? 'Updating...' : 'Update Password' }}
            </button>
        </form>
    </div>
</div>